## Руководство по использованию Swagger UI

### 1. Запуск приложения

Перед открытием Swagger нужно поднять backend:

```bash
# локально
uvicorn app.main:app --reload

# или через Docker
docker-compose up
```

После запуска API доступен по `http://localhost:8000`.

### 2. Открытый Swagger

- Swagger UI: `http://localhost:8000/api/v1/docs`

Swagger предоставляет интерактивное тестирование

### 3. Авторизация в Swagger

Большинство эндпоинтов защищены JWT:

1. В Swagger нажми кнопку **Authorize** (значок замка).
2. В поле `Value` вставь токен в формате `Bearer <access_token>`.
3. Нажми **Authorize**, затем **Close** — теперь все запросы будут отправляться с заголовком `Authorization`.

### 4. Получение access_token

Используй эндпоинт `POST /api/v1/auth/login`:

```json
{
  "username": "admin@example.com",
  "password": "your_password"
}
```

В ответе возьми `access_token` и срок действия (`expires_in`). Этот токен вводится в шаге авторизации.

### 5. Пример вызова через Swagger

1. Открой раздел, например **Deals** → `POST /api/v1/deals/`.
2. Нажми **Try it out**.
3. Заполни тело запроса:

```json
{
  "title": "Тестовая сделка",
  "status": "Новая",
  "amount": 100000,
  "contact_id": 1
}
```

4. Нажми **Execute** — справа появится фактический HTTP-запрос, статус и тело ответа.

### 6. Полезные советы

- Для фильтрации строк с кириллицей используйте URL-кодирование (`В работе` → `В%20работе`).
- Чтобы очистить токен, снова нажми **Authorize** и выбери **Logout**.
- Если схема изменилась, нажми **Clear** в браузере (кнопка в правом верхнем углу Swagger), чтобы обновить кэш.

Теперь документ можно открывать в браузере и использовать Swagger/ ReDoc без дополнительных инструкций в README.

